<!--pages/business-create-order/business-create-order.wxml-->
<scroll-view scroll-y class="page-scroll-container">

<page-header selfStyle="background-color: #E7E0D6;" />

<block wx:if="{{createdOrderList.length === 0}}">
<view class="form-label">
  <view class="form-label-name">客户名称 <text class="required">*</text></view>
</view>
<input
  class="form-input"
  placeholder="请输入客户名称"
  placeholder-class="form-input-placeholder"
  value="{{contactName}}"
  bindinput="handleContactNameInput"></input>

<view class="add-order-btn" catchtap="addOrderItem">
  <image src="./images/icon-addlist.png"></image>添加订单
</view>

<view class="store-tips">一个订单号对应一个量体图</view>

<!-- <view class="order-hint">一个订单号对应一个量体图</view> -->

<view class="order-item" wx:for="{{orderList}}" wx:key="index">
  <view class="cancle-order-panel">
    <image src="./images/icon-cancle-list.png" wx:if="{{orderList.length > 1}}" catchtap="deleteOrderItem" data-index="{{index}}" />
  </view>

  <view class="order-item-label">
    <view class="order-item-label-name">订单号 <text class="required">*</text></view>
  </view>
  <input
    class="order-item-input"
    value="{{item.order_id}}"
    placeholder="请输入订单号"
    placeholder-class="order-item-input-placeholder"
    data-index="{{index}}"
    bindinput="handleOrderIdInput"></input>
  
  <view
    class="order-item-clothing-info"
    wx:for="{{clothesTypeList}}"
    wx:for-index="clothesTypeIndex"
    wx:for-item="clothesType"
    wx:key="clothesTypeIndex">
    <view class="label">{{clothesType.name}}</view>
    <normal-counter
      amount="{{item.clothes[clothesType.value]}}"
      data-index="{{index}}"
      data-type="{{clothesType.value}}"
      bind:add="addClothesAmount"
      bind:minus="minusClothesAmount" />
  </view>

  <view class="order-item-label" style="margin-top: 32rpx;">
    <view class="order-item-label-name">备注</view>
  </view>
  <textarea
    class="order-item-textarea"
    style="margin-bottom: 0;"
    value="{{item.store_note}}"
    data-index="{{index}}"
    bindinput="handleStoreNoteInput"></textarea>

  <view class="order-item-label" style="margin-top: 32rpx;">
    <view class="order-item-label-name">上传量体数据</view>
  </view>
  <view class="upload-panel">
    <view
      class="uploaded-img"
      wx:for="{{item.tailored_image}}"
      wx:for-index="tailoredImageIndex"
      wx:for-item="tailoredImageItem"
      wx:key="tailoredImageIndex">
      <image src="{{tailoredImageItem}}" />
      <image
        catchtap="deleteTailoredImage"
        data-index="{{index}}"
        data-imgindex="{{tailoredImageIndex}}"
        class="delete"
        src="https://cloud-minapp-32931.cloud.ifanrusercontent.com/1j9VCl7lrsTc6HiT.png" />
    </view>
    <view class="upload-btn" catchtap="uploadTailoredImage" data-index="{{index}}">
      <image src="./images/icon-addpic.png"></image>
    </view>
    <view class="no-data-hint" wx:if="{{item.tailored_image.length === 0}}">
      <image src="./images/icon-warn.png"></image>
      暂未上传量体图
    </view>
  </view>
</view>

<view class="submit-btn" catchtap="handleSubmit">提交</view>
<view style="height: 150rpx;"></view>
</block>

<block wx:if="{{createdOrderList.length > 0}}">
  <view class="created-title">订单号</view>
  <view class="order-num-item" wx:for="{{createdOrderList}}" wx:key="id">{{item.order_id}}</view>
  <image class="order-qrcode-item" src="{{batchQRCode}}"></image>
  <view class="created-hint">
    <image src="./images/icon-success.png"></image>
    订单创建成功！
  </view>
</block>

<contact-entrance />

</scroll-view>
